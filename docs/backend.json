
{
  "entities": {
    "Project": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Project",
      "type": "object",
      "description": "Represents a project in the portfolio.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the project."
        },
        "title": {
          "type": "string",
          "description": "The title of the project."
        },
        "slug": {
          "type": "string",
          "description": "URL-friendly slug for the project (used in routes)."
        },
        "shortSummary": {
          "type": "string",
          "description": "A short summary of the project."
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the project, potentially in Markdown format."
        },
        "tech": {
          "type": "array",
          "description": "An array of technologies used in the project.",
          "items": {
            "type": "string"
          }
        },
        "tags": {
          "type": "array",
          "description": "An array of tags associated with the project.",
          "items": {
            "type": "string"
          }
        },
        "thumbnailUrl": {
          "type": "string",
          "description": "URL of the project thumbnail image.",
          "format": "uri"
        },
        "screenshots": {
          "type": "array",
          "description": "An array of URLs to project screenshots.",
          "items": {
            "type": "string"
          }
        },
        "githubUrl": {
          "type": "string",
          "description": "URL of the project's GitHub repository.",
          "format": "uri"
        },
        "demoUrl": {
          "type": "string",
          "description": "URL of the live demo of the project.",
          "format": "uri"
        },
        "published": {
          "type": "boolean",
          "description": "Indicates whether the project is published and visible on the public portfolio."
        },
        "publishedAt": {
          "type": "string",
          "description": "The date and time when the project was published.",
          "format": "date-time"
        },
        "authorId": {
            "type": "string",
            "description": "The UID of the user who created the project."
        }
      },
      "required": [
        "id",
        "title",
        "slug",
        "shortSummary",
        "description",
        "tech",
        "thumbnailUrl",
        "published",
        "authorId"
      ]
    },
    "Contact": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Contact",
      "type": "object",
      "description": "Represents a contact form submission.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the contact message."
        },
        "name": {
          "type": "string",
          "description": "The name of the person submitting the form."
        },
        "email": {
          "type": "string",
          "description": "The email address of the person submitting the form.",
          "format": "email"
        },
        "message": {
          "type": "string",
          "description": "The message content."
        },
        "createdAt": {
          "type": "string",
          "description": "The date and time when the contact message was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "email",
        "message",
        "createdAt"
      ]
    },
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User Profile",
      "type": "object",
      "description": "Represents a user profile in the application.",
      "properties": {
        "uid": {
          "type": "string",
          "description": "The user's unique ID from Firebase Authentication."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        },
        "photoURL": {
          "type": "string",
          "format": "uri",
          "description": "URL of the user's profile picture."
        },
        "heroImageUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL for the hero section image."
        },
        "isAdmin": {
          "type": "boolean",
          "description": "Flag to indicate if the user has administrative privileges."
        },
        "resumeUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL of the user's resume file."
        },
        "aboutMeTitle": {
          "type": "string",
          "description": "The title to display in the About Me section."
        },
        "aboutMeP1": {
            "type": "string",
            "description": "The first paragraph of the 'About Me' section."
        },
        "aboutMeP2": {
            "type": "string",
            "description": "The second paragraph of the 'About Me' section."
        },
        "aboutMeImageUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL for the 'About Me' section image."
        }
      },
      "required": [
        "uid",
        "email"
      ]
    },
    "Testimonial": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Testimonial",
      "type": "object",
      "description": "Represents a testimonial from a client or collaborator.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the testimonial."
        },
        "quote": {
          "type": "string",
          "description": "The content of the testimonial."
        },
        "name": {
          "type": "string",
          "description": "Name of the person giving the testimonial."
        },
        "designation": {
          "type": "string",
          "description": "Title and company of the person."
        },
        "src": {
          "type": "string",
          "description": "URL for the person's image.",
          "format": "uri"
        }
      },
      "required": [ "id", "quote", "name", "designation", "src" ]
    },
    "Skill": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Skill",
      "type": "object",
      "description": "Represents a single skill or technology.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the skill."
        },
        "name": {
          "type": "string",
          "description": "The name of the skill (e.g., 'React')."
        },
        "icon": {
          "type": "string",
          "description": "The full SVG content for the skill's icon."
        }
      },
      "required": [ "id", "name", "icon" ]
    }
  },
  "auth": {
    "providers": [
      "google"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/projects/{projectId}",
        "definition": {
          "entityName": "Project",
          "schema": {
            "$ref": "#/backend/entities/Project"
          },
          "description": "Stores project data. The 'published' field controls public visibility.",
          "rules": {
            "read": "resource.data.published == true",
            "get": "request.auth.token.email == 'himanshuanand563@gmail.com' || resource.data.published == true",
            "create": "request.auth.token.email == 'himanshuanand563@gmail.com'",
            "update": "request.auth.token.email == 'himanshuanand563@gmail.com'",
            "delete": "request.auth.token.email == 'himanshuanand563@gmail.com'"
          },
          "params": [
            {
              "name": "projectId",
              "description": "Unique identifier for the project."
            }
          ]
        }
      },
      {
        "path": "/contacts/{contactId}",
        "definition": {
          "entityName": "Contact",
          "schema": {
            "$ref": "#/backend/entities/Contact"
          },
          "description": "Stores contact form submissions.",
          "rules": {
            "read": false,
            "write": false,
            "create": true
          },
          "params": [
            {
              "name": "contactId",
              "description": "Unique identifier for the contact message."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores public-facing user profile information. The `isAdmin` flag is stored here to be checked by security rules.",
          "rules": {
            "read": true,
            "create": "request.auth.uid == userId",
            "update": "request.auth.token.email == 'himanshuanand563@gmail.com'",
            "write": "request.auth.uid == userId"
          },
          "params": [
            {
              "name": "userId",
              "description": "Unique identifier for the user, matching their Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/testimonials/{testimonialId}",
        "definition": {
          "entityName": "Testimonial",
          "schema": {
            "$ref": "#/backend/entities/Testimonial"
          },
          "description": "Stores testimonial data for the homepage.",
          "rules": {
            "read": true,
            "create": "request.auth.token.email == 'himanshuanand563@gmail.com'",
            "write": "request.auth.token.email == 'himanshuanand563@gmail.com'"
          },
          "params": [
            {
              "name": "testimonialId",
              "description": "Unique identifier for the testimonial."
            }
          ]
        }
      },
      {
        "path": "/skills/{skillId}",
        "definition": {
          "entityName": "Skill",
          "schema": {
            "$ref": "#/backend/entities/Skill"
          },
          "description": "Stores skills data for the homepage skills section.",
          "rules": {
            "read": true,
            "create": "request.auth.token.email == 'himanshuanand563@gmail.com'",
            "write": "request.auth.token.email == 'himanshuanand563@gmail.com'"
          },
          "params": [
            {
              "name": "skillId",
              "description": "Unique identifier for the skill."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to support a public portfolio site with an admin interface for managing projects, testimonials, and skills. The structure prioritizes authorization independence and supports secure list operations (QAPs). Authorization Independence is achieved by storing admin roles and checking against a specific admin email, securing project visibility via the `published` field. This design supports atomic operations and simplifies debugging.\n\nStructural Segregation is applied by storing projects, testimonials, and skills in their own top-level collections. The admin role is checked via a specific email string in the security rules. This approach enforces a homogeneous security posture for content, simplifying rules.\n\nAccess Modeling utilizes Path-Based ownership for admin roles via email checks. The project's published state is stored directly within the project document, and Firestore security rules leverage this field to control read access for public users. Public read is available for skills and testimonials.\n\nData Clarity is ensured by using explicit fields like `published` and standardized naming conventions."
  }
}
